<template>
  <div class="border border-gray-200 rounded-lg overflow-hidden bg-white hover:shadow-lg transition-shadow">
    <div class="bg-gradient-to-r from-blue-500 to-purple-500 p-3">
      <div class="flex items-center justify-between">
        <span class="text-white font-semibold">{{ getTypeLabel(example.type) }}</span>
        <span class="text-xs text-blue-100 px-2 py-1 bg-white bg-opacity-20 rounded">{{ example.type }}</span>
      </div>
    </div>
    <div class="p-4">
      <p class="text-gray-700 mb-3 text-sm">{{ example.desc }}</p>
      <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
        <pre class="text-green-400 text-sm font-mono"><code>{{ example.code }}</code></pre>
      </div>
      <button 
        @click="copyCode"
        class="mt-3 text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1"
      >
        <span>ğŸ“‹</span>
        <span>å¤åˆ¶ä»£ç </span>
      </button>
    </div>
  </div>
</template>

<script setup>
import { defineProps } from 'vue';

const props = defineProps({
  example: {
    type: Object,
    required: true,
  },
});

function getTypeLabel(type) {
  const labels = {
    'lazy-load': 'Vue ç»„ä»¶æ‡’åŠ è½½',
    'lazy-load-react': 'React ç»„ä»¶æ‡’åŠ è½½',
    'build-optimization-vite': 'Vite æ„å»ºä¼˜åŒ–',
    'build-optimization-webpack': 'Webpack ä»£ç åˆ†å‰²',
    'image-pipeline-sharp': 'Sharp å›¾ç‰‡ä¼˜åŒ–',
    'image-pipeline-imagemin': 'imagemin å›¾ç‰‡å‹ç¼©',
    'compression-express': 'Express å‹ç¼©',
    'compression-nginx': 'Nginx å‹ç¼©',
    'cdn-cache': 'CDN ç¼“å­˜ç­–ç•¥',
    'preload-prefetch': 'èµ„æºé¢„åŠ è½½',
    'virtual-scroll': 'è™šæ‹Ÿæ»šåŠ¨',
    'service-worker': 'Service Worker',
    'webpack-bundle-analyzer': 'Bundle åˆ†æ',
    'image-lazy-loading': 'å›¾ç‰‡æ‡’åŠ è½½',
  };
  return labels[props.example.type] || props.example.type;
}

function copyCode() {
  navigator.clipboard.writeText(props.example.code).then(() => {
    alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
  });
}
</script>
